@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Chat Page";
}

<div class="container" style="border:1px solid silver; height: 82dvh">
    <div class="row h-f">
        <div class="col-4" style="border-right: 1px solid silver; padding: 0">
            <h3 id="heading" style="margin-left: 5px;">Online</h3>
            <ul class="list-group" id="list-users">
            </ul>
        </div>
        <div class="col-8" style="padding: 0">
            <div style="border-bottom: 1px solid rgba(0,0,0,.125);padding: 9px; font-weight: bold; display: flex; justify-content: center; width: 100%">
                Pera Peric
            </div>
            <div style="width:100%; height: 85%; border-bottom: 1px solid rgba(0,0,0,.125); overflow: auto; margin: 0">
                <div id="userMessage" style="width: 100%;padding: 5px; display: flex; justify-content: left">
                    <div style="max-width: 48%; background-color: rgba(0,0,0,.125); padding: 10px; border-radius: 10px">
                        Cao brate moj, kako si mi sta radis?
                        <div style="width:100%; text-align: right; font-size: 8pt">19.05.2024 20:24</div>
                    </div>
                </div>
                <div id="myMessage" style="width: 100%; padding: 5px; display: flex; justify-content: right">
                    <div style="max-width: 48%; background-color: #0d6efd; padding: 10px; border-radius: 10px; color: white">
                        Evo brate nije lose pravo da ti kazem, a ti?
                        <div style="width:100%; text-align: right; font-size: 8pt">19.05.2024 20:24</div>
                    </div>
                </div>
            </div>

            <div class="row" style="display: flex; align-items: center; padding: 12px;">
                <div class="col-10">
                    <input id="txtMessage" type="text" class="form-control" style="width: 100%;" placeholder="Type message"/>
                </div>
                <div class="col-2" style="padding-left: 5px">
                    <button class="btn btn-primary" style="width: 100%;">Send</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="./js/microsoft/signalr/dist/browser/signalr.js"></script>
<script src="./js/chat.js"></script>

<script>
    const userListElement = document.getElementById("list-users");
    const userList = JSON.parse(sessionStorage.getItem('users') ?? '[]');
    const current = sessionStorage.getItem('currentUser');

    if (userListElement) {
        userList.forEach(function (user) {
                const li = `<li class="list-group-item" data-bs-toggle="tooltip" data-bs-placement="right"
                            data-bs-custom-class="custom-tooltip"
                            data-bs-title="Chat with ${user}">${user}<br /> <span class="active-user">• ACTIVE</span></li>`;
                userListElement.innerHTML += li;
        });
    }
</script>


<style>
    .w-f{
        width: 100% !important;
    }

    .h-f{
        height: 100% !important;
    }

    .active-user{
        font-size: 8pt;
        color: limegreen;
        font-weight: bold;
    }

    li{
        border-right: none !important;
        border-left: none !important;
        border-radius: 0 !important;
        cursor: pointer;
        transition-duration: .2s;
    }

    li:hover{
            background-color: #ebedf0;
    }
</style>

 